116 xxx


import java.net.*; import java.io.*;
public class DataPort {
int numInbound = 8;
DataInputStream[ ] ins = new DataInputStream[numInbound];
DataOutputStream[ ] outs = new DataOutputStream[numInbound];
public void initialConnect(int port) {
ServerSocket serverSocket = new ServerSocket(port);
for (int i = 0; i < numInbound; i++) {
try {
Socket clientSocket = serverSocket.accept(); // not part of communication
ins[i] = clientSocke.getInputStream();
outs[i] = clientSocke.getOutputStream();
} catch (IOException e) { /* omitted * }
}
System.out.println(“Connections are all established.”);
}
public void runCircle( ) {
try {
for (int j = 0; j < numBound; j++ ) { int num = ins[j].readInt();
outs[(j+1)%numBound].writeInt();
} catch(IOException ioe) { // omitted }
}
…
}